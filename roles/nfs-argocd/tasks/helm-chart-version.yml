#- name: nfs_subdir_external_provisioner_helm_repo_name
#  debug:
#    msg: 'nfs_subdir_external_provisioner_helm_repo_name: {{ nfs_subdir_external_provisioner_helm_repo_name }}'
#    verbosity: 2
#
#- name: nfs_subdir_external_provisioner_helm_repo_url
#  debug:
#    msg: 'nfs_subdir_external_provisioner_helm_repo_url: {{ nfs_subdir_external_provisioner_helm_repo_url }}'
#    verbosity: 2
#
#- name: nfs_subdir_external_provisioner_helm_chart_name
#  debug:
#    msg: 'nfs_subdir_external_provisioner_helm_chart_name: {{ nfs_subdir_external_provisioner_helm_chart_name }}'
#    verbosity: 2
#
#- name: nfs_subdir_external_provisioner_helm_chart_version
#  debug:
#    msg: 'nfs_subdir_external_provisioner_helm_chart_version: {{ nfs_subdir_external_provisioner_helm_chart_version}}'
#    verbosity: 2

- name: get latest helm chart version
  helm.chart.version:
    repo_name:  "{{ nfs_subdir_external_provisioner_helm_repo_name }}"
    repo_url:   "{{ nfs_subdir_external_provisioner_helm_repo_url }}"
    name:       "{{ nfs_subdir_external_provisioner_helm_chart_name }}"
    version:    "{{ nfs_subdir_external_provisioner_helm_chart_version | default('') }}"
  register: result

- name: dump result
  debug:
    msg: '{{ result }}'
    verbosity: 2

- name: dump fact helm_chart_version
  debug:
    msg: '{{ helm_chart_version }}'
    verbosity: 1
