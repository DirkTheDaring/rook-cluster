apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  namespace: {{ rook_argocd_namespace }}
  name:      rook-ceph
spec:
  destination:
    namespace: {{ rook_namespace }}
    server:    https://kubernetes.default.svc
  project: default
  source:
    repoURL:        {{ rook_chart_url }}
    chart:          {{ rook_chart_name }}
    targetRevision: {{ rook_chart_version }}
{% if not rook_ceph_server %}
    helm:
      parameters:
{% endif %}
  syncPolicy:
    automated: {}
    syncOptions:
    - CreateNamespace=true
