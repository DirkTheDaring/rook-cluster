env:
  WOODPECKER_LOG_LEVEL: {{ woodpecker_log_level }}

  WOODPECKER_HOST: {{ woodpecker_host }}
  WOODPECKER_GITLAB_URL: {{ woodpecker_gitlab_url }}
  WOODPECKER_ADMIN: {{ woodpecker_admin }}

  # WOODPECKER_USERNAME: dietmar
  WOODPECKER_OPEN: {{ woodpecker_open | lower }}
  WOODPECKER_GITHUB: {{ 'true' if woodpecker_repo_type == 'github' else 'false' }}
{% if woodpecker_repo_type != 'github' %}
  WOODPECKER_{{ woodpecker_repo_type | upper }}: true
{% endif %}

extraSecretNamesForEnvFrom:
- woodpecker-agent-secret
- woodpecker-{{ woodpecker_repo_type | lower }}-client
- woodpecker-{{ woodpecker_repo_type | lower }}-secret

persistentVolume:
  enabled: {{ woodpecker_persistent_volume_enabled | lower }}
  size: {{ woodpecker_persistent_volume_size }}
  mountPath: "/var/lib/woodpecker"
  storageClass: {{ woodpecker_persistent_volume_storage_class }}

ingress:
  enabled: {{ woodpecker_ingress_enabled | lower }}
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
  hosts:
    - host: {{ woodpecker_fqdn }}
      paths:
      - path: /
        backend:
          serviceName: woodpecker-server
          servicePort: 80
  tls: []

affinity: {}
