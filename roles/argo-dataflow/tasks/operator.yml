- name: Create temporary file
  ansible.builtin.tempfile:
    state: file
    suffix: yaml
  register: tempfile


- name: Download operator for dataflow
  ansible.builtin.get_url:
    url:  https://raw.githubusercontent.com/argoproj-labs/argo-dataflow/main/config/quick-start.yaml
    dest: "{{ tempfile.path }}"
    mode: '0664'

- name: apply operator
  kubernetes.core.k8s:
    state: present
    src:   "{{ tempfile.path }}"

- name: Use the registered var and the file module to remove the temporary file
  ansible.builtin.file:
    path: "{{ tempfile.path }}"
    state: absent
  when: tempfile.path is defined


